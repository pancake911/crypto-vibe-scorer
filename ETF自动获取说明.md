# ETF数据自动获取说明

## 📊 为什么需要手动输入？

ETF资金流向数据**可以自动获取**，但需要满足以下条件之一：

### 方案一：使用Coinglass API（推荐，需要付费）

**优点：**
- ✅ 数据准确可靠
- ✅ 实时更新
- ✅ 支持多个代币（BTC、ETH、SOL等）

**步骤：**

1. **注册Coinglass账号**
   - 访问：https://www.coinglass.com/zh/CryptoApi
   - 注册并登录

2. **获取API密钥**
   - 在开发者中心申请API密钥
   - 选择合适的套餐（根据调用频率）

3. **配置API密钥**
   - 在项目根目录创建 `.env.local` 文件
   - 添加：
     ```
     COINGLASS_API_KEY=你的API密钥
     ```
   - 重启程序

4. **程序会自动获取ETF数据**
   - 点击"获取数据"时，会自动调用API
   - ETF资金流向会自动填充到输入框
   - 显示"✓ 已自动获取"标识

---

### 方案二：使用免费数据源（有限）

**现状：**
- 目前没有完全免费的ETF数据公开API
- farside.co.uk 需要解析HTML，且可能被反爬虫保护
- 其他免费数据源数据可能不完整

**如果找到免费API：**
- 可以修改 `app/api/etf/route.ts` 文件
- 添加新的数据源获取逻辑

---

## 🔧 如何配置API密钥

### 1. 创建环境变量文件

在项目根目录创建 `.env.local` 文件：

```bash
cd ~/Desktop/cursor/crypto-vibe-scorer
touch .env.local
```

### 2. 添加API密钥

在 `.env.local` 文件中添加：

```
COINGLASS_API_KEY=你的API密钥
```

### 3. 重启程序

```bash
# 停止当前程序（Ctrl+C）
# 重新启动
npm run dev
```

### 4. 测试

- 输入 BTC 或 ETH
- 点击"获取数据"
- 如果配置成功，ETF数据会自动填充

---

## 💡 当前实现

**已实现的功能：**
- ✅ ETF数据自动获取框架
- ✅ 支持Coinglass API集成
- ✅ 自动填充到输入框
- ✅ 显示自动获取状态

**当前状态：**
- ⚠️ 如果没有配置API密钥，会显示"无法自动获取"
- ⚠️ 需要用户手动输入或访问Coinglass查询

---

## 🎯 建议

1. **如果经常使用：**
   - 建议注册Coinglass API
   - 数据更准确，使用更方便

2. **如果偶尔使用：**
   - 可以继续手动输入
   - 或访问Coinglass查询后填写

3. **如果找到免费API：**
   - 告诉我，我可以帮你集成

---

## 📝 总结

**ETF数据可以自动获取，但需要：**
- Coinglass API密钥（付费，但数据准确）
- 或找到其他免费数据源

**当前程序：**
- 已实现自动获取框架
- 配置API密钥后即可自动获取
- 未配置时，提供手动输入和查询链接

